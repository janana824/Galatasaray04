<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Galatasaray.MainPage"
             BackgroundColor="#000000">

    <Grid>
        <Grid x:Name="PortraitLayout" IsVisible="True" RowDefinitions="*,Auto" Padding="0">

            <ScrollView Grid.Row="0">
                <Grid Padding="15,20,15,15" RowSpacing="25" ColumnSpacing="15"
                      RowDefinitions="Auto,Auto" ColumnDefinitions="*,*">

                    <VerticalStackLayout Grid.Row="0" Grid.Column="0" Spacing="8" HorizontalOptions="Center">
                        <Label Text="⚡" TextColor="#00ff41" FontSize="32" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#00ff41" CornerRadius="100" Padding="15" HasShadow="False" HeightRequest="170" WidthRequest="170">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="4">
                                    <Label Text="ACEL" TextColor="#00ff41" FontSize="12" FontAttributes="Bold" HorizontalOptions="Center" Margin="0,0,0,3"/>
                                    <Label Text="{Binding AccelX, StringFormat='X: {0:F1}'}" TextColor="#ffffff" FontSize="16" FontFamily="Courier New" HorizontalOptions="Center"/>
                                    <Label Text="{Binding AccelY, StringFormat='Y: {0:F1}'}" TextColor="#ffffff" FontSize="16" FontFamily="Courier New" HorizontalOptions="Center"/>
                                    <Label Text="{Binding AccelZ, StringFormat='Z: {0:F1}'}" TextColor="#ffffff" FontSize="16" FontFamily="Courier New" HorizontalOptions="Center"/>
                                    <Label Text="g" TextColor="#666666" FontSize="10" HorizontalOptions="Center" Margin="0,2,0,0"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsEnabled="{Binding AccelSupported}" IsToggled="{Binding AccelOn}" OnColor="#00ff41" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Row="0" Grid.Column="1" Spacing="8" HorizontalOptions="Center">
                        <Label Text="🧭" TextColor="#00d4ff" FontSize="32" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#00d4ff" CornerRadius="100" Padding="15" HasShadow="False" HeightRequest="170" WidthRequest="170">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="0">
                                    <Label Text="BRÚJULA" TextColor="#00d4ff" FontSize="11" FontAttributes="Bold" HorizontalOptions="Center"/>
                                    <Label Text="{Binding CompassHeading, StringFormat='{0:F0}°'}" TextColor="#00d4ff" FontSize="50" FontAttributes="Bold" FontFamily="Courier New" HorizontalOptions="Center" Margin="0,5,0,2"/>
                                    <Label Text="NORTE" TextColor="#666666" FontSize="10" HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsEnabled="{Binding CompassSupported}" IsToggled="{Binding CompassOn}" OnColor="#00d4ff" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Row="1" Grid.Column="0" Spacing="8" HorizontalOptions="Center">
                        <Label Text="🌡️" TextColor="#ffd600" FontSize="32" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#ffd600" CornerRadius="100" Padding="15" HasShadow="False" HeightRequest="170" WidthRequest="170">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="0">
                                    <Label Text="PRESIÓN" TextColor="#ffd600" FontSize="11" FontAttributes="Bold" HorizontalOptions="Center"/>
                                    <Label Text="{Binding BaroHpa, StringFormat='{0:F1}'}" TextColor="#ffd600" FontSize="46" FontAttributes="Bold" FontFamily="Courier New" HorizontalOptions="Center" Margin="0,5,0,2"/>
                                    <Label Text="hPa" TextColor="#666666" FontSize="11" HorizontalOptions="Center"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsEnabled="{Binding BaroSupported}" IsToggled="{Binding BaroOn}" OnColor="#ffd600" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>

                    <VerticalStackLayout Grid.Row="1" Grid.Column="1" Spacing="8" HorizontalOptions="Center">
                        <Label Text="🔄" TextColor="#ff6b00" FontSize="32" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#ff6b00" CornerRadius="100" Padding="15" HasShadow="False" HeightRequest="170" WidthRequest="170">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="4">
                                    <Label Text="GIRO" TextColor="#ff6b00" FontSize="12" FontAttributes="Bold" HorizontalOptions="Center" Margin="0,0,0,3"/>
                                    <Label Text="{Binding GyroX, StringFormat='X: {0:F1}'}" TextColor="#ffffff" FontSize="16" FontFamily="Courier New" HorizontalOptions="Center"/>
                                    <Label Text="{Binding GyroY, StringFormat='Y: {0:F1}'}" TextColor="#ffffff" FontSize="16" FontFamily="Courier New" HorizontalOptions="Center"/>
                                    <Label Text="{Binding GyroZ, StringFormat='Z: {0:F1}'}" TextColor="#ffffff" FontSize="16" FontFamily="Courier New" HorizontalOptions="Center"/>
                                    <Label Text="rad/s" TextColor="#666666" FontSize="9" HorizontalOptions="Center" Margin="0,2,0,0"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsEnabled="{Binding GyroSupported}" IsToggled="{Binding GyroOn}" OnColor="#ff6b00" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>

                </Grid>
            </ScrollView>

            <Grid Grid.Row="1" RowDefinitions="Auto,Auto" Padding="0,0,0,10">

                <Grid Grid.Row="0" Padding="15,10,15,5" BackgroundColor="#000000" 
                      ColumnDefinitions="*,*" 
                      RowDefinitions="Auto,Auto" 
                      ColumnSpacing="12"
                      RowSpacing="10">

                    <Button Grid.Row="0" Grid.Column="0" 
                            Text="▶ INICIAR TODO" 
                            Command="{Binding StartAllCommand}"
                            BackgroundColor="#00ff41" TextColor="#000000" FontAttributes="Bold" FontSize="13" CornerRadius="10" HeightRequest="50"/>

                    <Button Grid.Row="0" Grid.Column="1" 
                            Text="⏹ DETENER TODO" 
                            Command="{Binding StopAllCommand}"
                            BackgroundColor="#ff1744" TextColor="#ffffff" FontAttributes="Bold" FontSize="13" CornerRadius="10" HeightRequest="50"/>

                    <Button Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2"
                            Text="📤 EXPORTAR BASE DE DATOS"
                            Command="{Binding ShareDbCommand}"
                            BackgroundColor="#00d4ff" TextColor="#000000" FontAttributes="Bold" FontSize="13" CornerRadius="10" HeightRequest="50"/>
                </Grid>

                <Grid Grid.Row="1" BackgroundColor="#1a1a1a" Padding="15,12" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10">
                    <BoxView Grid.Column="0" WidthRequest="10" HeightRequest="10" CornerRadius="5" Color="#00ff41" VerticalOptions="Center"/>
                    <Label Grid.Column="1" Text="{Binding StatusText}" TextColor="#00d4ff" FontSize="11" VerticalOptions="Center" LineBreakMode="TailTruncation"/>
                    <Label Grid.Column="2" Text="SENSORES" TextColor="#f88888" FontSize="10" FontAttributes="Bold" VerticalOptions="Center"/>
                </Grid>
            </Grid>
        </Grid>

        <Grid x:Name="LandscapeLayout" IsVisible="False" RowDefinitions="*,Auto" Padding="0">
            <ScrollView Grid.Row="0" Orientation="Horizontal">
                <HorizontalStackLayout Padding="15,20" Spacing="20">
                    <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                        <Label Text="⚡" TextColor="#00ff41" FontSize="28" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#00ff41" CornerRadius="100" HasShadow="False" Padding="12" WidthRequest="140" HeightRequest="140">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="3">
                                    <Label Text="ACEL" TextColor="#00ff41" FontSize="11" FontAttributes="Bold"/>
                                    <Label Text="{Binding AccelX, StringFormat='X:{0:F1}'}" TextColor="#ffffff" FontSize="14" FontFamily="Courier New"/>
                                    <Label Text="{Binding AccelY, StringFormat='Y:{0:F1}'}" TextColor="#ffffff" FontSize="14" FontFamily="Courier New"/>
                                    <Label Text="{Binding AccelZ, StringFormat='Z:{0:F1}'}" TextColor="#ffffff" FontSize="14" FontFamily="Courier New"/>
                                    <Label Text="g" TextColor="#666666" FontSize="9"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsToggled="{Binding AccelOn}" OnColor="#00ff41" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>
                    <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                        <Label Text="🧭" TextColor="#00d4ff" FontSize="28" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#00d4ff" CornerRadius="100" HasShadow="False" Padding="12" WidthRequest="140" HeightRequest="140">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="1">
                                    <Label Text="BRÚJULA" TextColor="#00d4ff" FontSize="10" FontAttributes="Bold"/>
                                    <Label Text="{Binding CompassHeading, StringFormat='{0:F0}°'}" TextColor="#00d4ff" FontSize="38" FontAttributes="Bold" FontFamily="Courier New"/>
                                    <Label Text="N" TextColor="#666666" FontSize="9"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsToggled="{Binding CompassOn}" OnColor="#00d4ff" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>
                    <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                        <Label Text="🌡️" TextColor="#ffd600" FontSize="28" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#ffd600" CornerRadius="100" HasShadow="False" Padding="12" WidthRequest="140" HeightRequest="140">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="1">
                                    <Label Text="PRESIÓN" TextColor="#ffd600" FontSize="10" FontAttributes="Bold"/>
                                    <Label Text="{Binding BaroHpa, StringFormat='{0:F1}'}" TextColor="#ffd600" FontSize="36" FontAttributes="Bold" FontFamily="Courier New"/>
                                    <Label Text="hPa" TextColor="#666666" FontSize="10"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsToggled="{Binding BaroOn}" OnColor="#ffd600" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>
                    <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                        <Label Text="🔄" TextColor="#ff6b00" FontSize="28" HorizontalOptions="Center"/>
                        <Frame BackgroundColor="#0a0a0a" BorderColor="#ff6b00" CornerRadius="100" HasShadow="False" Padding="12" WidthRequest="140" HeightRequest="140">
                            <Grid>
                                <VerticalStackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="3">
                                    <Label Text="GIRO" TextColor="#ff6b00" FontSize="11" FontAttributes="Bold"/>
                                    <Label Text="{Binding GyroX, StringFormat='X:{0:F1}'}" TextColor="#ffffff" FontSize="14" FontFamily="Courier New"/>
                                    <Label Text="{Binding GyroY, StringFormat='Y:{0:F1}'}" TextColor="#ffffff" FontSize="14" FontFamily="Courier New"/>
                                    <Label Text="{Binding GyroZ, StringFormat='Z:{0:F1}'}" TextColor="#ffffff" FontSize="14" FontFamily="Courier New"/>
                                    <Label Text="rad/s" TextColor="#666666" FontSize="8"/>
                                </VerticalStackLayout>
                            </Grid>
                        </Frame>
                        <Switch IsToggled="{Binding GyroOn}" OnColor="#ff6b00" ThumbColor="White" HorizontalOptions="Center" BackgroundColor="Transparent"/>
                    </VerticalStackLayout>
                </HorizontalStackLayout>
            </ScrollView>

            <Grid Grid.Row="1" RowDefinitions="Auto,Auto" Padding="0,0,0,10">
                <Grid Grid.Row="0" Padding="15,10" BackgroundColor="#000000" 
                      ColumnDefinitions="*,*,*" RowDefinitions="Auto" ColumnSpacing="10">
                    <Button Grid.Column="0" Text="▶ INICIAR" Command="{Binding StartAllCommand}" BackgroundColor="#00ff41" TextColor="#000" FontSize="11" FontAttributes="Bold" CornerRadius="8" HeightRequest="40"/>
                    <Button Grid.Column="1" Text="⏹ DETENER" Command="{Binding StopAllCommand}" BackgroundColor="#ff1744" TextColor="#fff" FontSize="11" FontAttributes="Bold" CornerRadius="8" HeightRequest="40"/>
                    <Button Grid.Column="2" Text="📤 EXPORTAR" Command="{Binding ShareDbCommand}" BackgroundColor="#00d4ff" TextColor="#000" FontSize="11" FontAttributes="Bold" CornerRadius="8" HeightRequest="40"/>
                </Grid>
                <Grid Grid.Row="1" BackgroundColor="#1a1a1a" Padding="12,5" ColumnDefinitions="Auto,*,Auto" ColumnSpacing="8">
                    <BoxView Grid.Column="0" WidthRequest="8" HeightRequest="8" CornerRadius="4" Color="#00ff41" VerticalOptions="Center"/>
                    <Label Grid.Column="1" Text="{Binding StatusText}" TextColor="#00d4ff" FontSize="10" VerticalOptions="Center"/>
                    <Label Grid.Column="2" Text="SENSORES" TextColor="#888" FontSize="9" FontAttributes="Bold" VerticalOptions="Center"/>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</ContentPage>